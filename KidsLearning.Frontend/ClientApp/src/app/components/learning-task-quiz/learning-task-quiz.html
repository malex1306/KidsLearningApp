@if (!isCompleted && questions.length > 0) {
  <div class="quiz-container">

    @switch (currentQuestion?.learningTaskId) {

      <!-- Mathe-Aufgaben -->
      @case(1){
      <ng-container></ng-container>
    }
      @case(2) {
        <div class="quiz-area">
          <div class="task-card glass-card question-card">
            <div class="card-content">
              <h2 class="question-title">
                Frage {{ currentQuestionIndex + 1 }} von {{ questions.length }}
              </h2>
              <p class="question-text">
                {{ currentQuestion?.text }}
              </p>
            </div>
          </div>

          <div class="options-grid" [class.disabled]="isWaitingForNext">
            @for (option of currentQuestion?.options; track option) {
              <button class="option-button"
                      [ngClass]="{
                        'correct-answer': answerStatus === 'correct' && option === currentQuestion?.correctAnswer,
                        'wrong-answer': answerStatus === 'wrong' && option === selectedAnswer
                      }"
                      (click)="selectAnswer(option)">
                {{ option }}
              </button>
            }
          </div>
        </div>
      }

      <!-- Formen-Aufgaben -->
      @case(3){
        <ng-container></ng-container>
      }
      @case(12) {
        <div class="quiz-area fill-form-quiz">
          <div class="task-card glass-card question-card">
            <div class="card-content">
              <h2 class="question-title">
                Frage {{ currentQuestionIndex + 1 }} von {{ questions.length }}
              </h2>
              <p class="question-text">{{ currentQuestion?.text }}</p>
            </div>
          </div>

          <div class="options-grid">
            @for (option of currentQuestion?.options; track option) {
              <button (click)="selectAnswer(option, currentQuestion!.options.indexOf(option))">
                {{ option }}
              </button>
            }
          </div>
        </div>
      }

      <!-- Buchstaben-Land Aufgaben -->
      @case(4){
        <ng-container></ng-container>
      }
      @case(5){
        <ng-container></ng-container>
      }
      @case(6){
        <ng-container></ng-container>
      }
      @case(10) {
        <div class="quiz-area">
          <div class="task-card glass-card question-card">
            <div class="card-content">
              <h2 class="question-title">
                Frage {{ currentQuestionIndex + 1 }} von {{ questions.length }}
              </h2>
              <p class="question-text">{{ currentQuestion?.text }}</p>
            </div>
          </div>

          <div class="options-grid">
            @for (option of currentQuestion?.options; track option) {
              <button class="option-button"
                      (click)="selectAnswer(option)"
                      [ngClass]="{
                        'correct-answer': answerStatus === 'correct' && option === currentQuestion?.correctAnswer,
                        'wrong-answer': answerStatus === 'wrong' && selectedAnswer === option
                      }">
                {{ option }}
              </button>
            }
          </div>
        </div>
      }

      <!-- Englisch Aufgaben -->
      @case(7){
        <ng-container></ng-container>
      }
      @case(8){
        <ng-container></ng-container>
      }
      @case(9) {
        <div class="quiz-area">
          <div class="task-card glass-card question-card">
            <div class="card-content">
              <h2 class="question-title">
                Frage {{ currentQuestionIndex + 1 }} von {{ questions.length }}
              </h2>
              <p class="question-text">{{ currentQuestion?.text }}</p>
            </div>
          </div>

          <div class="options-grid">
            @for (option of currentQuestion?.options; track option) {
              <button class="option-button"
                      (click)="selectAnswer(option)"
                      [ngClass]="{
                        'correct-answer': answerStatus === 'correct' && option === currentQuestion?.correctAnswer,
                        'wrong-answer': answerStatus === 'wrong' && selectedAnswer === option
                      }">
                {{ option }}
              </button>
            }
          </div>
        </div>
      }

      <!-- Zahlenkombinationen -->
      @case(11) {
        <app-logic-task></app-logic-task>
      }

      <!-- Default / leere Tasks -->
      @default {
        <ng-container></ng-container> <!-- leerer Block, verhindert NG5002 -->
        <div class="task-header">
          <h3>Aufgabe konnte nicht geladen werden</h3>
        </div>
      }
    }

    <!-- Feedback -->
    @if(selectedAnswer){
      <div class="feedback">
        <p>{{ feedbackMessage }}</p>
      </div>
    }

    <!-- Navigation -->
    <div class="navigation-buttons">
      @if (currentQuestionIndex === 0) {
        <a [routerLink]="['tasks', 'Quiz-Ozean', 'child', activeChild()?.id]" class="fun-button">
          â¬… ZurÃ¼ck
        </a>
      } @else {
        <button class="fun-button" (click)="prevQuestion()">â¬… Vorherige</button>
      }

      @if (currentQuestionIndex === questions.length - 1) {
        <a [routerLink]="['tasks', 'Quiz-Ozean', 'child', activeChild()?.id]" class="fun-button">
          Beenden âœ…
        </a>
      } @else {
        <button class="fun-button" (click)="nextQuestion()">
          {{ currentQuestionIndex < questions.length - 1 ? 'NÃ¤chste Frage' : 'Quiz beenden' }}
        </button>
      }
    </div>
  </div>

  <!-- Abschluss Screen -->
  @if (isCompleted) {
    <div class="completion-screen">
      <h2>Quiz abgeschlossen! ðŸŽ‰</h2>
      <p>Gut gemacht! Du hast alle Fragen beantwortet.</p>
    </div>
  }
}
